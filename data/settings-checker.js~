(function(settingsChecker, undefined) {
    let peekedBefore = false;
    let field = '';
    let httpsPageFound = false;
    

    settingsChecker.checkHttpsPage = function() {
        self.port.on('https-page-exists', function() {
            httpsPageFound = true;
        });
    };
    
    settingsChecker.httpsPageExists = function() {
        return httpsPageFound;
    };
    
    settingsChecker.pwdHasBeenPeekedBefore = function() {
        peekedBefore = true;
    };
    
    settingsChecker.isPasswordPeekedBefore = function(element, imgi) {
        if(!peekedBefore) {
	    imgi.className = "anchorclass";
            notifyAboutCleartext();    
            //requestStorageStatus();
            //readStorageStatus(element, imgi);
            peekedBefore = true;
        } else {
            showPwd.peekPassword(element);
        }      	
    };

   /* function requestStorageStatus() {
        self.port.emit('request-storage-status');
    } */
    
   /* function readStorageStatus(element, imgi) {
        self.port.on('storage-status', function(status) {
            if(!status) {
                // TODO: Add some function that opens panels and adds anchorclass before sending to prevent repetition?
                imgi.className = "anchorclass";
                notifyAboutCleartext();
            } else {
                showPwd.peekPassword(element);
            }
        });
    } */

    function notifyAboutCleartext() {
        self.port.emit('info', 'secure-panel');
        self.port.emit('used');
    }
            
} (window.settingsChecker = window.settingsChecker || {}));
